schema{
  query: AdminQuery,
  mutation: AdminMutation
}

"""
Contains all admin available queries.
Only an authenticated admin can execute these queries.
"""
type AdminQuery{
  "Get all enabled domains by hostType"
  domainsByHostType(hostType: String!): [String!] @protected
  "Get information about the domain"
  domainDetails(domain: String!): Domain @protected
  "Check authorization status"
  checkAuth: AuthStatus
  stanza: StanzaAdminQuery
}

"""
Contains all admin available mutations
Only an authenticated admin can execute these mutations.
"""
type AdminMutation @protected{
  "Add new domain"
  addDomain(domain: String!, hostType: String!): Domain
  "Remove domain"
  removeDomain(domain: String!, hostType: String!): RemoveDomainPayload
  "Enable domain"
  enableDomain(domain: String!): Domain
  "Disable domain"
  disableDomain(domain: String!): Domain
  stanza: StanzaAdminMutation
}

type StanzaAdminQuery @protected{
  "Get n last messages to/from a given contact (optional) with limit and optional date"
  getLastMessages(caller: JID!, with: JID, limit: Int, before: DateTime): StanzasPayload
}

type StanzaAdminMutation @protected{
  "Send a chat message to a local or remote bare or full JID"
  sendMessage(from: JID!, to: JID!, body: String!): SendStanzaPayload
  "Send a headline message to a local or remote bare or full JID"
  sendMessageHeadLine(from: JID!, to: JID!, subject: String, body: String): SendStanzaPayload
  "Send an arbitrary stanza"
  sendStanza(stanza: Stanza): SendStanzaPayload
}

"""
A dynamic domain representation.
Some operation could return incomplete object i.e. some fields can be null.
"""
type Domain{
  "Domain name"
  domain: String
  "Domain hostType"
  hostType: String
  "Is domain enabled?"
  enabled: Boolean
}

"A result of domain removal"
type RemoveDomainPayload{
  "Success message"
  msg: String
  "Removed domain data"
  domain: Domain
}

scalar DateTime
scalar Stanza
scalar JID

type StanzasPayload{
  stanzas: [StanzaMap]
}

type StanzaMap{
  sender: JID
  timestamp: DateTime
  stanza_id: String
  stanza: Stanza
}

type SendStanzaPayload{
  id: ID
}

